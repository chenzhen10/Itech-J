<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Main</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/3.0.1/mustache.min.js"
            type="text/javascript"></script>
    <script id="content" type="text/template">

        <tr>
            <td><input type="checkbox" name="check" value="{{id}}"></td>
            <td><a href="#">{{surname}} {{name}} {{lastName}}</a></td>
            <td>{{birthDate}}</td>
            <td>{{address.country}}</td>
            <td>{{address.city}}</td>
            <td>{{address.street}}</td>
            <td>{{address.house}}</td>
            <td>{{address.numOfFlat}}</td>
            <td>{{address.index}}</td>
            <td>{{workplace}}</td>
        </tr>

    </script>


    <script language="JavaScript" type="text/javascript">

        function loadData(url) {
            return fetch(url).then(res => res.json());
        }
        function render(data){
        var template = document.getElementById('content').innerHTML;
        var renderContext = document.getElementById('dataTable');
        data.forEach(function (contact) {
            renderContext.innerHTML +=  Mustache.render(template,contact);
        });

        }

        loadData('client?command=all_users').then(res => render(res));
    </script>
</head>
<body>


<button onclick="window.location='client?command=go_to_add_user_page'">Add user</button>
<div>
    <table  border="2">
        <thead>
        <tr>
            <th></th>
            <th>Full name</th>
            <th>Birthday</th>
            <th>Country</th>    <!-- приходится добавлять колонки, т.к. если делать одну, то остаются запятые при null значениях -->
            <th>City</th>
            <th>Street</th>
            <th>House number</th>
            <th>Flat number</th>
            <th>Zip code</th>
            <th>Place of Work</th>
        </tr>
        </thead>
        <tbody id="dataTable"></tbody>
    </table>
</div>


</body>
</html>
